<%= javascript_include_tag 'report_form' %>

<div class="container px-0">
  <div class="row">
    <div class="col-lg-8 offset-lg-2">
      <% if false %>
        <% if is_new
          url = confirm_reports_path
        else
          url = confirm_report_path(report.id)
        end %>
      <% end %>

      <%= form_with(model: report, local: true) do |f| %>
        <% if report.errors.any? %>
          <div id="error_explanation">
            <h2><%= pluralize(report.errors.count, "error") %> 件の未入力または誤った入力があります</h2>
            <ul>
              <% report.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
            </ul>
          </div>
        <% end %>

        <div class="mt-5 pt-3">
        </div>

        <p class="my-0 py-0 px-2 small">
          <span class="small text-danger">※回答必須項目は「必須」タブ内のみです。</span>
        </p>

        <div class="parent-tab">
          <div class="p-1">
          </div>
          <ul class="nav nav-tabs parent-menu mt-0 pt-0">
            <li><a href="#tab_1" class="active mostleft-tab" data-toggle="tab"><span class="text-danger">1.基礎</span></a></li>
            <li><a href="#tab_2" data-toggle="tab">2.治療</a></li>
            <li><a href="#tab_3" data-toggle="tab">3.ユーザ</a></li>
            <li><a href="#tab_4" data-toggle="tab">4.レビュー</a></li>
          </ul>
          <section class="parent-tab-content active mostleft-tab" id="tab_1">
            <div class="child-tab">
              <ul class="nav nav-tabs child-menu">
                <li><a href="#tab_1_1" class="active" data-toggle="tab"><span class="text-danger">必須</span></a></li>
                <li><a href="#tab_1_2" data-toggle="tab">概要</a></li>
                <li><a href="#tab_1_3" data-toggle="tab">年齢</a></li>
                <li><a href="#tab_1_4" data-toggle="tab">転院歴</a></li>
                <li><a href="#tab_1_5" data-toggle="tab">その他</a></li>
              </ul>
              <section class="child-tab-content active" id="tab_1_1">
                <div class="alert alert-danger small rounded-lg" role="alert">
                  <strong>この項目は必ず選択して下さい。<br>未選択では投稿/保存はできません。</strong>
                </div>
                <div class="scroll-box row">
                  <div class="col-sm-6">
                    <div class="form-group border border-danger rounded-lg p-3 mt-0">
                      <small class="text-danger float-right">※必須</small>
                      <div class="label p-1"><%= f.label :clinic_id, 'クリニックを選択', class: "question-matters" %></div>
                      <div>
                        <% if report.clinic.blank? %>
                          <% prefecture_id = nil %>
                        <% else %>
                          <% prefecture_id = report.clinic.prefecture_id %>
                        <% end %>
                        <%= select_tag :select_prefecture,
                                        options_from_collection_for_select(Prefecture.all, :id, :name, selected: prefecture_id),
                                        {
                                          prompt: "都道府県",
                                          class: "form-control",
                                        }
                        %>
                      </div><br>

                      <div>
                        <% if report.clinic.blank? %>
                          <% city_id = nil %>
                          <%= select_tag :city, options_for_select([["市区町村", 99]],), { class: "form-control" } %>
                        <% else %>
                          <% city_id = report.clinic.city_id %>
                          <% cities = City.where(prefecture_id: prefecture_id).order(:id).joins(:clinics).distinct %>
                          <%= collection_select :prefecture, :city, cities, :id, :name, { prompt: "市区町村", selected: city_id }, { class: "form-control", id: "city" } %>
                        <% end %>
                      </div><br>
                      <div>
                        <% if report.clinic.blank? %>
                          <%= f.select :clinic_id, {}, { prompt: "クリニック"}, { class: "form-control" } %>
                        <% else %>
                          <% clinics = Clinic.where(city_id: city_id) %>
                          <%= collection_select :report, :clinic_id, clinics, :id, :name, {prompt: "クリニック"}, { class: "form-control" } %>
                        <% end %>
                        <small id="poster-tip" class="form-text text-muted">
                          <small class="text-danger">選択必須項目です。</small>
                        </small>
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="form-group border border-danger rounded-lg p-3 mt-0">
                      <small class="text-danger float-right">※必須</small>
                      <div class="label p-1"><%= f.label :address_at_the_time_of_treatment, '治療当時のお住まい', class: "question-matters" %></div>
                      <div>
                        <%= f.collection_select(:prefecture_id, Prefecture.all, :id, :name, {prompt: "都道府県"}, {class: "form-control"}) %>
                      </div>
                      <small><small class="text-danger">選択必須項目です。</small></small>
                      <small id="poster-tip" class="form-text text-muted text-right pt-2">
                        <%= f.check_box :prefecture_at_the_time_status, {}, "hide", "show" %>非公開<br>
                      </small><br>
                      <div>
                        <% if report.city.blank? %>
                          <%= f.select :city_id, {}, { prompt: "市区町村" }, { class: "form-control" } %>
                        <% else %>
                          <% city = report.city_id %>
                          <% prefecture_id = report.prefecture_id %>
                          <% cities = City.where(prefecture_id: prefecture_id) %>
                          <%= collection_select :report, :city_id, cities, :id, :name, { prompt: "市区町村", selected: city }, { class: "form-control" } %>
                        <% end %>
                      </div>
                      <small><small class="text-danger">選択必須項目です。</small></small>
                      <small id="poster-tip" class="form-text text-muted text-right pt-2">
                        <%= f.check_box :city_at_the_time_status, {}, "hide", "show" %>非公開<br>
                      </small>
                    </div>
                  </div>
                </div>
              </section>
              <section class="child-tab-content" id="tab_1_2">
                <div class="scroll-box">
                  <div class="form-group mt-0">
                    <div class="label"><%= f.label :current_state, '投稿時点の状況', class: "question-matters" %></div>
                    <%= f.select :current_state, Report::HASH_CURRENT_STATE.invert, { prompt: "選択" }, { class: "form-control" } %>
                    <small id="poster-tip" class="form-text text-muted">
                      投稿後でも上記ステータスの変化に応じて更新(変更)可能です。
                    </small>
                  </div>

                  <div class="form-group">
                    <div class="label p-1"><%= f.label :fertility_treatment_number, '何人目の不妊治療', class: "question-matters" %></div>
                    <%= f.select :fertility_treatment_number, Report::HASH_FERTILITY_TREATMENT_NUMBER.invert, { prompt: "選択" }, { class: "form-control" } %>
                  </div>

                  <div class="form-group">
                    <div class="label p-1"><%= f.label :types_of_eggs_and_sperm, '妊娠に至った卵子と精子', class: "question-matters" %></div>
                    <%= f.select :types_of_eggs_and_sperm, Report::HASH_TYPES_OF_EGGS_AND_SPERM.invert, { prompt: "選択" }, { class: "form-control" }  %>
                  </div>

                  <div class="form-group mt-2 description_of_eggs_and_sperm_used">
                    <div class="label p-1"><%= f.label :description_of_eggs_and_sperm_used, '妊娠に至った卵子と精子について', class: "question-matters" %></div>
                    <%= f.text_area :description_of_eggs_and_sperm_used, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例)アメリカで卵子提供を受けました" %>
                  </div>

                  <div class="form-group">
                    <div class="label p-1"><%= f.label :types_of_fertilization_methods, '妊娠に至った卵子と精子の受精方法', class: "question-matters" %></div>
                    <%= f.select :types_of_fertilization_methods, Report::HASH_TYPES_OF_FERTILIZATION_METHODS.invert, { prompt: "選択" }, { class: "form-control" }  %>
                  </div>

                  <div class="form-group detail-of-icsi">
                    <div class="label p-1"><%= f.label :details_of_icsi, '顕微受精の種類', class: "question-matters" %></div>
                    <%= f.select :details_of_icsi, Report::HASH_DETAILS_OF_ICSI.invert, { prompt: "選択" }, { class: "form-control" }  %>
                  </div>

                  <div class="form-group">
                    <div class="label p-1"><%= f.label :treatment_period, 'このクリニックでの治療期間', class: "question-matters" %></div>
                    <%= f.select :treatment_period, Report::HASH_TREATMENT_PERIOD.invert, { prompt: "選択" }, { class: "form-control" }  %>
                  </div>

                  <div class="form-group">
                    <div class="label p-1"><%= f.label :rest_period, '自主的なお休み期間', class: "question-matters" %></div>
                    <%= f.select :rest_period, Report::HASH_TREATMENT_PERIOD.invert, { prompt: "選択" }, { class: "form-control" }  %>
                    <p class="small pt-4 pb-2 mb-0">おやすみ期間の補足説明</p>
                    <%= f.text_area :rest_period_memo, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例)例文いれる" %>
                  </div>

                </div>
              </section>
              <section class="child-tab-content" id="tab_1_3">
                <div class="scroll-box">
                  <div class="form-group mt-0">
                    <div class="label p-1">
                      <%= f.label :year_of_treatment_end, 'このクリニックでの治療終了年', class: "question-matters" %>
                    </div>
                      <%= f.date_select :year_of_treatment_end, {
                        discard_month: true,
                        discard_day: true,
                        start_year: (Time.now.year),
                        end_year: 2000,
                        prompt: "選択"
                        },
                        { class: "form-control" } %>
                  </div>

                  <div class="form-group">
                    <div class="label p-1"><%= f.label :treatment_start_age, 'このクリニックでの治療開始年齢', class: "question-matters" %></div>
                    <%= f.select :treatment_start_age, Report::HASH_TREATMENT_START_AGE.invert, { prompt: "選択" }, { class: "form-control" } %>
                  </div>

                  <div class="form-group">
                    <div class="label p-1"><%= f.label :treatment_end_age, 'このクリニックでの治療終了時の年齢', class: "question-matters" %></div>
                    <%= f.select :treatment_end_age, Report::HASH_TREATMENT_END_AGE.invert, { prompt: "選択" }, { class: "form-control" } %>
                  </div>

                  <div class="form-group">
                    <div class="label p-1"><%= f.label :age_of_partner_at_end_of_treatment, 'このクリニックで治療終了時のパートナーの年齢', class: "question-matters" %></div>
                    <%= f.select :age_of_partner_at_end_of_treatment, Report::HASH_AGE_OF_PARTNER_AT_END_OF_TREATMENT.invert, { prompt: "選択" }, { class: "form-control" }  %>
                  </div>
                </div>
              </section>
              <section class="child-tab-content" id="tab_1_4">
                <div class="scroll-box">
                  <div class="form-group mt-0">
                    <div class="label"><%= f.label :number_of_clinics, 'このクリニックは何院目', class: "question-matters" %></div>
                    <%= f.select :number_of_clinics, Report::HASH_NUMBER_OF_CLINICS.invert, { prompt: "選択" }, { class: "form-control" } %>
                  </div> 

                  <div class="form-group px-0">
                    <p>転院歴</p>
                    <%= f.fields_for :itinerary_of_choosing_a_clinics do |itinerary_of_choosing_a_clinic| %>
                      <%= render "itinerary_of_choosing_a_clinic_fields", f: itinerary_of_choosing_a_clinic %>
                    <% end %>
                    <div class="links pt-2 pl-2">
                      <%= link_to_add_association "+ 追加", f, :itinerary_of_choosing_a_clinics %>
                    </div>
                    <div class="alert alert-info small rounded-lg px-2">
                      <small>
                        <span class="small text-muted">
                          行が足りない場合は「+追加」して下さい。<br>
                          <span class="text-danger"><u>回答される際には各行の「必須」項目は必ず選択して下さい。</u></span><br>
                        </span>
                      </small>
                    </div>
                  </div>

                  <div class="form-group">
                    <div class="label p-1 pb-3"><span class="question-matters"><%= f.label :cl_selection, 'このクリニックを選んだ理由' %></span><br>
                      <small class="text-muted small">複数選択可</small>
                    </div>
                    <%= f.collection_check_boxes(:cl_selection_ids, ClSelection.all, :id, :name) do |b| %>
                      <div class="form-check form-check-inline checkbox">
                        <%= b.label class: "form-check-label" do %>
                          <%= b.check_box class: "form-check-input" %>
                          <%= b.text %>
                        <% end %>
                      </div>
                    <% end %>
                    <p class="small pt-4 pb-2 mb-0">選定理由の補足説明</p>
                    <%= f.text_area :reasons_for_choosing_this_clinic, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例):信頼する〇〇医師がいたから/ 〇〇治療を実施できるクリニックだったから など" %>
                  </div>

                  <div class="form-group pt-3 px-1">
                    <div class="label p-1"><%= f.label :reason_for_transfer, '前院から転院を決めた理由', class: "question-matters" %></div>
                    <%= f.text_area :reason_for_transfer, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例):信頼できなかったから" %>
                  </div>

                  <div class="form-group">
                    <div class="label"><%= f.label :briefing_session, '説明会参加有無', class: "question-matters" %></div>
                    <%= f.select :briefing_session, Report::HASH_BRIEFING_SESSION.invert, { prompt: "選択" }, { class: "form-control" } %>
                  </div>
                </div>
              </section>
              <section class="child-tab-content" id="tab_1_5">
                <div class="scroll-box">
                  <div class="form-group mt-0 mb-0 pb-0">
                    <div class="label"><%= f.label :how_long_to_continue_treatment, '治療継続期限の設定有無', class: "question-matters" %></div>
                    <%= f.select :how_long_to_continue_treatment, Report::HASH_HOW_LONG_TO_CONTINUE_TREATMENT.invert, { prompt: "選択" }, { class: "form-control" } %>
                  </div>

                  <div class="form-group mt-3 how_long_to_continue_treatment2">
                    <div class="label"><%= f.label :how_long_to_continue_treatment2, '具体的期限(期間)', class: "question-matters" %></div>
                    <%= f.select :how_long_to_continue_treatment2, Report::HASH_HOW_LONG_TO_CONTINUE_TREATMENT2.invert, { prompt: "選択" }, { class: "form-control" } %>
                  </div>

                  <p class="small pt-4 pb-2 mb-0">治療期限の補足説明</p>
                  <%= f.text_area :how_long_to_continue_treatment_memo, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例):1年と決めてのぞみました" %>

                  <div class="form-group">
                    <div class="label p-1"><%= f.label :most_sad_thing, '治療中特に辛かったこと', class: "question-matters" %></div>
                    <%= f.text_area :most_sad_thing, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例):夫の無理解" %>
                  </div>
                </div>
              </section>
            </div>
          </section>
          <section class="parent-tab-content" id="tab_2">
            <div class="child-tab">
              <ul class="nav nav-tabs child-menu">
                <li><a href="#tab_2_1" class="active" data-toggle="tab">通院</a></li>
                <li><a href="#tab_2_2" data-toggle="tab">検査</a></li>
                <li><a href="#tab_2_3" data-toggle="tab">採卵</a></li>
                <li><a href="#tab_2_4" data-toggle="tab">移植</a></li>
                <li><a href="#tab_2_5" data-toggle="tab">費用</a></li>
              </ul>
              <section class="child-tab-content active" id="tab_2_1">
                <div class="scroll-box">
                  <div class="form-group mt-0">
                    <p class="mb-0">通院スケジュール</p>
                    <%= f.fields_for :treatment_schedules do |treatment_schedule| %>
                      <%= render "treatment_schedule_fields", f: treatment_schedule %>
                    <% end %>
                    <div class="links pt-2 pl-2">
                      <%= link_to_add_association "+ 追加", f, :treatment_schedules %>
                    </div>
                    <p class="small pt-4 pb-2 mb-0">通院スケジュール補足説明</p>
                    <%= f.text_area :treatment_schedule_memo, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例):" %>
                  </div>

                  <div class="form-group">
                    <div class="label p-1"><%= f.label :reservation_method, '診察の予約方法', class: "question-matters" %></div>
                    <%= f.select :reservation_method, Report::HASH_RESERVATION_METHOD.invert, { prompt: "選択" }, { class: "form-control" }  %>
                  </div>

                  <div class="form-group mb-5">
                    <div class="label p-1"><%= f.label :period_of_time_spent_traveling, '通院時間 (自宅⇄クリニック)', class: "question-matters" %></div>
                    <%= f.select :period_of_time_spent_traveling, Report::HASH_PERIOD_OF_TIME_SPENT_TRAVELING.invert, { prompt: "選択" }, { class: "form-control" }  %>
                  </div>

                  <div class="form-group">
                    <div class="label p-1"><%= f.label :online_consultation, 'オンライン診療の有無', class: "question-matters" %></div>
                    <%= f.select :online_consultation, Report::HASH_ONLINE_CONSULTATION.invert, { prompt: "選択" }, { class: "form-control" }  %>
                    <p class="small pt-4 pb-2 mb-0">オンライン診療の補足説明</p>
                      <%= f.text_area :online_consultation_details, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "内容のほか、感想など(メリットデメリット)" %>
                  </div>
                </div>
              </section>
              <section class="child-tab-content" id="tab_2_2">
                <div class="scroll-box">
                  <h6 class="py-4 mb-0"><b>&nbsp;各種検査</b></h6>
                  <div class="parent-tab">
                    <ul class="nav nav-tabs parent-menu mt-0 pt-0">
                      <li><a href="#left_tab" class="active mostleft-tab" data-toggle="tab">女性</a></li>
                      <li><a href="#right_tab" data-toggle="tab">男性</a></li>
                    </ul>
                    <div class="parent-tab-content active mostleft-tab p-2" id="left_tab">
                      <div class="alert alert-light rounded-lg border p-2 mb-0 text-dark" role="alert">
                        <div class="form-group mt-0">
                          <div class="label p-1"><%= f.label :amh, '治療中のAMH値', class: "question-matters" %></div>
                          <%= f.select :amh, Report::HASH_AMH.invert, { prompt: "選択" }, { class: "form-control" }  %>
                          <small id="poster-tip" class="form-text text-muted">
                            <span class="small">治療中における最新の値を選択して下さい。</span>
                          </small>
                        </div>

                        <div class="form-group">
                          <div class="label p-1 pb-3"><span class="question-matters"><%= f.label :cl_female_inspection, '基本検査(女性)' %></span> <br>
                            <small class="text-muted small">このクリニックで受けた基礎検査全てを選択下さい</small>
                          </div>
                          <%= f.collection_check_boxes(:cl_female_inspection_ids, ClFemaleInspection.all, :id, :name) do |b| %>
                            <div class="form-check form-check-inline checkbox">
                              <%= b.label class: "form-check-label" do %>
                                <%= b.check_box class: "form-check-input" %>
                                <%= b.text %>
                              <% end %>
                            </div>
                          <% end %>
                          <p class="small pt-4 pb-2 mb-0">基本検査の補足説明(女性)</p>
                          <%= f.text_area :cl_female_inspection_memo, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "検査結果などの補足情報があれば入力して下さい" %>
                        </div>

                        <div class="form-group">
                          <p class="pb-0 mb-0">基本検査以外に受けた特殊検査</p>
                          <%= f.fields_for :special_inspections do |special_inspection| %>
                            <%= render "special_inspection_fields", f: special_inspection %>
                          <% end %>
                          <div class="links pt-2 pl-2">
                            <%= link_to_add_association "+ 追加", f, :special_inspections %>
                          </div>
                          <div class="alert alert-info small rounded-lg px-2">
                            <small>
                              受けた検査があれば選択&入力して下さい。<br>
                              <span class="small text-muted">
                                <span class="text-danger"><u>入力される場合は「検査」だけは必ず選択して下さい。</u></span><br>
                                費用は「半角数字」で入力して下さい。必要なだけ行を追加できます。
                              </span>
                            </small>
                          </div>
                        </div>
                        <p class="small pt-4 pb-2 mb-0">特殊検査の補足説明</p>
                        <%= f.text_area :special_inspection_memo, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "補足説明" %>
                      </div>
                    </div>
                    <div class="parent-tab-content p-2" id="right_tab">
                      <div class="alert alert-light rounded-lg border p-2 mb-0 text-dark" role="alert">
                        <div class="form-group mt-0">
                          <div class="label p-1 pb-3"><span class="question-matters"><%= f.label :cl_male_inspection, '検査(男性)' %></span> <br>
                            <small class="text-muted small">このクリニックで受けた基礎検査全てを選択下さい</small>
                          </div>
                          <%= f.collection_check_boxes(:cl_male_inspection_ids, ClMaleInspection.all, :id, :name) do |b| %>
                            <div class="form-check form-check-inline checkbox">
                              <%= b.label class: "form-check-label" do %>
                                <%= b.check_box class: "form-check-input" %>
                                <%= b.text %>
                              <% end %>
                            </div>
                          <% end %>
                          <p class="small pt-4 pb-2 mb-0">検査の補足説明(男性)</p>
                          <%= f.text_area :cl_male_inspection_memo, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "検査結果などの補足情報があれば入力して下さい" %>
                        </div>

                        <p class="mt-5 mb-3 pt-3">精液検査関連</p>

                        <table class="table table-hover">
                          <tr>
                            <td class="small text-muted text-center px-0" style="width:30%">
                              精液量
                            </td>
                            <td style="width:70%">
                              <%= f.number_field :semen_volume, { step: "0.1", class: "form-control", placeholder: "半角数字入力 ml" } %>
                            </td>
                          </tr>
                          <tr>
                            <td class="small text-muted text-center px-0">
                              精子総数
                            </td>
                            <td>
                              <%= f.number_field :total_amount_of_sperm, { class: "form-control", placeholder: "半角数字入力"} %>
                            </td>
                          </tr>
                          <tr>
                            <td class="small text-muted text-center px-0">
                              精子濃度
                            </td>
                            <td>
                              <%= f.number_field :semen_concentration, { class: "form-control", placeholder: "半角数字入力 ml" } %>
                            </td>
                          </tr>
                          <tr>
                            <td class="small text-muted text-center px-0">
                              運動率
                            </td>
                            <td>
                              <%= f.number_field :sperm_motility, { step: "0.1", class: "form-control", placeholder: "半角数字入力 %" } %>
                            </td>
                          </tr>
                          <tr>
                            <td class="small text-muted text-center px-0">
                              前進運動率
                            </td>
                            <td>
                              <%= f.number_field :sperm_advance_rate, { step: "0.1", class: "form-control", placeholder: "半角数字入力 %" } %>
                            </td>
                          </tr>
                          <tr>
                            <td class="small text-muted text-center px-0">
                              正常形態率
                            </td>
                            <td>
                              <%= f.number_field :probability_of_normal_morphology_of_sperm, { step: "0.1", class: "form-control", placeholder: "半角数字入力 %" } %>
                            </td>
                          </tr>
                          <tr>
                            <td class="small text-muted text-center px-0">
                              喫煙の有無
                            </td>
                            <td>
                              <%= f.select :smoking_male, Report::HASH_SMOKING.invert, { prompt: "選択" }, { class: "form-control text-muted" }  %>
                            </td>
                          </tr>
                        </table>

                        <div class="form-group pt-2">
                          <div class="label p-1"><%= f.label :sperm_description, '精液検査について', class: "question-matters" %></div>
                            <%= f.text_area :sperm_description, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例)精液検査は毎回結果の変動が激しかったです" %>
                        </div>
                      </div>
                    </div>
                  </div>

                  <h6 class="py-3 mt-5 mb-3"><b>着床前スクリーニング</b></h6>
                  <div class="form-group mt-0 pt-0">
                    <p class="pb-0">このクリニックの着床前スクリーニング実施の有無</p>
                    <%= f.select :pgt1, Report::HASH_PGT1.invert, { prompt: "選択" }, { class: "form-control" }  %>
                    <small id="poster-tip" class="form-text text-muted text-right pt-2"><%= f.check_box :pgt1_status, {}, "hide", "show" %>非公開</small>
                  </div>
                  <div class="form-group mt-2">
                    <p class="pb-0">着床前スクリーニングの受診</p>
                    <%= f.select :pgt2, Report::HASH_PGT2.invert, { prompt: "選択" }, { class: "form-control" }  %>
                    <small id="poster-tip" class="form-text text-muted text-right pt-2"><%= f.check_box :pgt2_status, {}, "hide", "show" %>非公開</small>
                    <p class="pt-5">着床前スクリーニングの補足説明</p>
                    <%= f.text_area :pgt_supplementary_explanation, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例)クリニックへの着床前診断の相談経緯や料金など" %>
                    <small id="poster-tip" class="form-text text-muted text-right pt-2"><%= f.check_box :pgt_supplementary_explanation_status, {}, "hide", "show" %>非公開</small>
                  </div>
                </div>
              </section>
              <section class="child-tab-content" id="tab_2_3">
                <div class="scroll-box">
                  <div class="form-group mt-0 mb-5">
                    <div class="label p-1"><%= f.label :total_number_of_sairan, 'このクリニックでの全採卵回数', class: "question-matters" %></div>
                    <%= f.select :total_number_of_sairan, Report::HASH_TOTAL_NUMBER_OF_SAIRAN.invert, { prompt: "選択" }, { class: "form-control" }  %>
                  </div>
                  <div class="parent-tab">
                    <ul class="nav nav-tabs parent-menu mt-0 pt-0">
                      <li><a href="#left_tab2" class="active mostleft-tab" data-toggle="tab">妊娠に至った最新周期</a></li>
                      <li><a href="#right_tab2" data-toggle="tab">過去周期</a></li>
                    </ul>
                    <div class="parent-tab-content active mostleft-tab p-2" id="left_tab2">
                      <div class="alert alert-light rounded-lg border p-2 mb-0 text-dark" role="alert">
                        <div class="form-group mt-0">
                          <div class="label p-1"><%= f.label :sairan_age, '採卵時の年齢', class: "question-matters" %></div>
                          <%= f.select :sairan_age, Report::HASH_SAIRAN_AGE.invert, { prompt: "選択" }, { class: "form-control" } %>
                          <small id="poster-tip" class="form-text text-danger">
                            妊娠に至った採卵時の年齢
                          </small>
                        </div>

                        <div class="form-group mt-0">
                          <div class="label p-1"><%= f.label :smoking_female, '(女性)治療中の喫煙', class: "question-matters" %></div>
                          <%= f.select :smoking_female, Report::HASH_SMOKING.invert, { prompt: "選択" }, { class: "form-control" }  %>
                        </div>

                        <div class="form-group">
                          <div class="label p-1"><%= f.label :type_of_ovarian_stimulation, '誘発タイプ', class: "question-matters" %></div>
                          <%= f.select :type_of_ovarian_stimulation, Report::HASH_TYPE_OF_OVARIAN_STIMULATION.invert, { prompt: "選択" }, { class: "form-control" }  %>
                        </div>
                        <div class="form-group">
                          <div class="label p-1"><%= f.label :type_of_sairan_cycle, '誘発方法', class: "question-matters" %></div>
                          <%= f.select :type_of_sairan_cycle, Report::HASH_TYPE_OF_SAIRAN_CYCLE.invert, { prompt: "選択" }, { class: "form-control" }  %>
                          <p class="small pt-4 pb-2 mb-0">採卵誘発の補足説明</p>
                          <%= f.text_area :notes_on_type_of_sairan_cycle, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例) 私が通ったクリニックでは「〇〇法」という独自の呼び方でした。ですが内容は〇〇と一緒でした" %>
                        </div>

                        <div class="form-group">
                          <div class="label p-1"><span class="question-matters"><%= f.label :sairan_medicine, '使用薬剤' %></span></div><br>
                          <%= f.collection_check_boxes(:sairan_medicine_ids, SairanMedicine.all, :id, :name) do |b| %>
                            <div class="form-check checkbox">
                              <%= b.label class: "form-check-label" do %>
                                <%= b.check_box class: "form-check-input" %>
                                <%= b.text %>
                              <% end %>
                            </div>
                          <% end %>
                          <% if false %>
                          <div class="form-group">
                            <div class="label p-1"><%= f.label :sairan_medicine, "上記選択肢に無いので新たに薬剤を追加する", class: "question-matters" %></div>
                            <%= text_field_tag :sm_name, "", class: "form-control", placeholder: "半角カンマ区切り" %>
                            <small id="poster-tip" class="form-text text-warning">
                              <span class="small">複数ある場合は「半角カンマ」で区切って下さい。</span>
                            </small>
                          </div>
                          <% end %>
                        </div>

                        <div class="form-group">
                          <div class="label p-1"><%= f.label :use_of_anesthesia, '採卵時の麻酔の有無と種類', class: "question-matters" %></div>
                          <%= f.select :use_of_anesthesia, Report::HASH_USE_OF_ANESTHESIA.invert, { prompt: "選択" }, { class: "form-control" }  %>
                        </div>

                        <div class="form-group">
                          <div class="label p-1"><%= f.label :selection_of_anesthesia_type, '麻酔の選択', class: "question-matters" %></div>
                          <%= f.select :selection_of_anesthesia_type, Report::HASH_SELECTION_OF_ANESTHESIA_TYPE.invert, { prompt: "選択" }, { class: "form-control" }  %>
                        </div>

                        <div class="form-group">
                          <div class="label p-1"><%= f.label :number_of_eggs_collected, '採卵個数', class: "question-matters" %></div>
                          <%= f.select :number_of_eggs_collected, Report::HASH_NUMBER_OF_EGGS_COLLECTED.invert, { prompt: "選択" }, { class: "form-control" }  %>
                        </div>

                        <div class="form-group">
                          <div class="label p-1"><%= f.label :egg_maturity, '卵子(受精前)の成熟度', class: "question-matters" %></div>
                          <%= f.select :egg_maturity, Report::HASH_EGG_MATURITY.invert, { prompt: "選択" }, { class: "form-control" }  %>
                        </div>

                        <div class="form-group">
                          <div class="label p-1"><%= f.label :ova_with_ivm, '体外成熟培養(IVM))実施の有無', class: "question-matters" %></div>
                          <%= f.select :ova_with_ivm, Report::HASH_OVA_WITH_IVM.invert, { prompt: "選択" }, { class: "form-control" }  %>
                          <small class="text-muted small">
                            IVMとは、ホルモン剤などを添加した専用の培養液で未受精卵を1～2日培養し、体外で成熟させる方法。
                          </small>
                          <small id="poster-tip" class="form-text text-muted">
                            <span class="small">→&nbsp;&nbsp;<a href="https://www.oakclinic-group.com/funin/ivm.html" rel="nofollow" target="window_name" onClick="disp('https://www.oakclinic-group.com/funin/ivm.html')"><u>IVMとは</u></a>&nbsp;&nbsp;(参考:&nbsp;医療法人オーク会)</span>
                          </small>
                        </div>

                        <div class="form-group">
                          <div class="label p-1"><%= f.label :number_of_fertilized_eggs, '受精個数', class: "question-matters" %></div>
                          <%= f.select :number_of_fertilized_eggs, Report::HASH_NUMBER_OF_FERTILIZED_EGGS.invert, { prompt: "選択" }, { class: "form-control" }  %>
                        </div>

                        <div class="form-group">
                          <div class="label p-1"><%= f.label :number_of_transferable_embryos, '移植可能胚の数(新鮮胚含む)', class: "question-matters" %></div>
                          <%= f.select :number_of_transferable_embryos, Report::HASH_NUMBER_OF_TRANSFERABLE_EMBRYOS.invert, { prompt: "選択" }, { class: "form-control" }  %>
                        </div>

                        <div class="form-group">
                          <div class="label p-1"><%= f.label :number_of_frozen_eggs, '凍結胚の個数', class: "question-matters" %></div>
                          <%= f.select :number_of_frozen_eggs, Report::HASH_NUMBER_OF_FROZEN_EGGS.invert, { prompt: "選択" }, { class: "form-control" }  %>
                        </div>

                        <div class="form-group">
                          <div class="label p-1"><%= f.label :embryo_culture_days, '胚の培養日数', class: "question-matters" %></div>
                          <%= f.select :embryo_culture_days, Report::HASH_EMBRYO_CULTURE_DAYS.invert, { prompt: "選択" }, { class: "form-control" }  %>
                        </div>

                        <div class="form-group">
                          <div class="label p-1 mb-0">
                            <%= f.label :embryo_stage, '妊娠に至った胚のステージ', class: "question-matters mb-0" %><br>
                            <div class="stage-alert-none">
                              <span class="transplant_method_dis1 small text-muted"></span>
                              <span class="transplant_method small text-danger"></span>
                              <span class="transplant_method_dis2 small text-muted"></span>
                            </div>
                            <div class="stage-alert alert alert-primary mb-0 pb-0">
                              <span class="transplant_method_dis3 small text-muted"></span>
                              <span class="transplant_method2 small text-danger"></span>
                              <span class="transplant_method_dis4 small text-muted"></span>
                              <span class="transplant_method_dis5 small text-muted"></span>
                            </div>
                          </div>
                          <%= f.select :embryo_stage, Report::HASH_EMBRYO_STAGE.invert, { prompt: "選択" }, { class: "form-control" }  %>
                        </div>

                        <div class="form-group">
                          <p><span class="text-danger font-weight-bold">採卵日以前</span>の各ホルモン値</p>
                          <%= f.fields_for :sairan_hormones do |sairan_hormone| %>
                            <%= render "sairan_hormone_fields", f: sairan_hormone %>
                          <% end %>
                          <div class="links pt-2 pl-2">
                            <%= link_to_add_association "+ 追加", f, :sairan_hormones %>
                          </div>
                          <div class="alert alert-info small rounded-lg px-2">
                            <span class="small text-muted">
                              <span class="text-danger"><u>入力される場合は「<strong>D</strong>&nbsp;<span class="text-muted">(Day)</span>」だけは必ず選択して下さい。</u></span><br>
                              D以外は空でも問題ありません。各種ホルモン値は「半角数字」で入力下さい。必要なだけ行を追加できます。採卵後の移植周期(移植前･後)も同様の入力欄が以降にあります。
                            </span>
                          </div>
                        </div>

                        <div class="form-group">
                          <p><span class="text-danger font-weight-bold">採卵日当日</span>の各ホルモン値</p>
                          <%= f.fields_for :day_of_sairans do |day_of_sairan| %>
                            <table class="table table-sm table-bordered table-hover mb-0">
                              <thead>
                                <tr>
                                  <th scope="col" class="hormon-label">D&nbsp;<span class="small"><small class="text-info">(必須)</small></span></th>
                                  <th scope="col" class="hormon-label">E2</th>
                                  <th scope="col" class="hormon-label">FSH</th>
                                  <th scope="col" class="hormon-label">LH</th>
                                  <th scope="col" class="hormon-label">P4</th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr>
                                  <th scope="row" class="day-column"><%= day_of_sairan.select :day, Report.make_select_day_of_sairan, { prompt: "まず選択" }, { class: "form-control text-muted" } %></th>
                                  <td class="hormon-column"><%= day_of_sairan.number_field :e2, { step: "0.01", class: "form-control", placeholder: "pg/ml" } %></td>
                                  <td class="hormon-column"><%= day_of_sairan.number_field :fsh, { step: "0.01", class: "form-control", placeholder: "mIU/ml" } %></td>
                                  <td class="hormon-column"><%= day_of_sairan.number_field :lh, { step: "0.01", class: "form-control", placeholder: "mIU/ml" } %></td>
                                  <td class="hormon-column"><%= day_of_sairan.number_field :p4, { step: "0.01", class: "form-control", placeholder: "ng/ml" } %></td>
                                </tr>
                              </tbody>
                            </table>
                          <% end %>
                          <div class="alert alert-info small rounded-lg px-2 mt-2">
                            <span class="small text-muted">
                              <span class="text-danger"><u>採卵日がわかっていて、ホルモン値がわからない場合には「<strong>D</strong>&nbsp;<span class="text-muted">(Day)</span>」のみ選択して下さい。</u></span><br>
                              D以外は空でも問題ありません。各種ホルモン値は「半角数字」で入力下さい。採卵後の移植周期(移植前･後)も同様の入力欄が以降にあります。
                            </span>
                          </div>
                        </div>

                        <div class="form-group">
                          <div class="label p-1"><%= f.label :explanation_and_impression_about_sairan, '採卵まとめ', class: "question-matters" %></div>
                          <%= f.text_area :explanation_and_impression_about_sairan, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "採卵に関しての感想や情報を載せて下さい" %>
                        </div>
                      </div>
                    </div>
                    <div class="parent-tab-content mostleft-tab p-2" id="right_tab2">
                      <div class="alert alert-light rounded-lg border p-2 mb-0 text-dark" role="alert">
                        <div class="alert alert-info rounded-lg border mt-3 mb-0 text-dark small" role="alert">
                          <p class="mb-0">このクリニックでの過去の採卵結果を分かる範囲で教えて下さい。<br>複数回採卵をされている場合には「追加」ボタンで追加できます。</p>
                        </div>
                        <div class="form-group mt-0 pt-0">
                          <p><span class="text-danger font-weight-bold"></p>
                          <%= f.fields_for :unsuccessful_sairan_cycles do |unsuccessful_sairan_cycle| %>
                            <%= render "unsuccessful_sairan_cycle_fields", f: unsuccessful_sairan_cycle %>
                          <% end %>
                          <div class="links pt-2 pl-2">
                            <%= link_to_add_association "+ 追加", f, :unsuccessful_sairan_cycles %>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </section>
              <section class="child-tab-content" id="tab_2_4">
                <div class="scroll-box">
                  <div class="form-group mt-0">
                    <div class="label p-1"><%= f.label :total_number_of_transplants, 'このクリニックでの全移植「回」数', class: "question-matters" %></div>
                    <%= f.select :total_number_of_transplants, Report::HASH_TOTAL_NUMBER_OF_TRANSPLANTS.invert, { prompt: "選択" }, { class: "form-control" }  %>
                  </div>

                  <div class="form-group mb-5">
                    <div class="label p-1"><%= f.label :total_number_of_eggs_transplanted, 'このクリニックでの移植全「個」数', class: "question-matters" %></div>
                    <%= f.select :total_number_of_eggs_transplanted, Report::HASH_TOTAL_NUMBER_OF_EGGS_TRANSPLANTED.invert, { prompt: "選択" }, { class: "form-control" }  %>
                  </div>

                  <div class="parent-tab">
                    <ul class="nav nav-tabs parent-menu mt-0 pt-0">
                      <li><a href="#left_tab3" class="active mostleft-tab" data-toggle="tab">妊娠に至った最新周期</a></li>
                      <li><a href="#right_tab3" data-toggle="tab">過去周期</a></li>
                    </ul>
                    <div class="parent-tab-content active mostleft-tab p-2" id="left_tab3">
                      <div class="alert alert-light rounded-lg border p-2 mb-0 text-dark" role="alert">
                        <div class="form-group mt-0">
                          <div class="label p-1"><%= f.label :ishoku_age, '移植時の年齢', class: "question-matters" %></div>
                          <%= f.select :ishoku_age, Report::HASH_ISHOKU_AGE.invert, { prompt: "選択" }, { class: "form-control" } %>
                          <small class="text-muted">
                          最新の移植時の年齢
                          </small>
                        </div>

                        <div class="form-group">
                          <div class="label p-1"><%= f.label :transplant_method, '最新移植周期の移植方法', class: "question-matters" %></div>
                          <%= f.select :transplant_method, Report::HASH_TRANSPLANT_METHOD.invert, { prompt: "選択" }, { class: "form-control" } %>
                        </div>

                        <div class="form-group">
                          <div class="label p-1"><%= f.label :ishoku_type, '移植周期のタイプ', class: "question-matters" %></div>
                          <%= f.select :ishoku_type, Report::HASH_ISHOKU_TYPE.invert, { prompt: "選択" }, { class: "form-control" }  %>

                          <div class="form-group">
                            <div class="label p-1"><span class="question-matters"><%= f.label :transfer_medicine, '移植周期で使用した薬剤' %></span></div>
                            <%= f.collection_check_boxes(:transfer_medicine_ids, TransferMedicine.all, :id, :name) do |b| %>
                              <div class="form-check checkbox">
                                <%= b.label class: "form-check-label" do %>
                                  <%= b.check_box class: "form-check-input" %>
                                  <%= b.text %>
                                <% end %>
                              </div>
                            <% end %>
                          </div>
                          <% if false %>
                          <div class="form-group pt-2">
                            <div class="label p-1"><%= f.label :transfer_medicine, "上記選択肢に無いので新たに薬剤を追加する", class: "question-matters" %></div>
                            <%= text_field_tag :tm_name, "", class: "form-control", placeholder: "半角カンマ区切り" %>
                            <small id="poster-tip" class="form-text text-warning">
                              <span class="small">複数ある場合は「半角カンマ」で区切って下さい。</span>
                            </small>
                          </div>
                          <% end %>
                          <br>
                          <div class="form-group">
                            <div class="label p-1"><span class="question-matters"><%= f.label :transfer_option, '移植オプション(複数選択可)' %></span></div>
                            <%= f.collection_check_boxes(:transfer_option_ids, TransferOption.all, :id, :name) do |b| %>
                              <div class="form-check checkbox">
                                <%= b.label class: "form-check-label" do %>
                                  <%= b.check_box class: "form-check-input" %>
                                  <%= b.text %>
                                <% end %>
                              </div>
                            <% end %>
                            <% if false %>
                            <div class="form-group pt-2">
                              <div class="label p-1"><%= f.label :transfer_option, "上記選択肢に無いので新たに移植オプションを追加する", class: "question-matters" %></div>
                              <%= text_field_tag :to_name, "", class: "form-control", placeholder: "半角カンマ区切り" %>
                              <small id="poster-tip" class="form-text text-warning">
                                <span class="small">複数ある場合は「半角カンマ」で区切って下さい。</span>
                              </small>
                            </div>
                            <% end %>
                          </div>
                        </div>

                        <div class="form-group before_ishoku-hormone">
                          <p>採卵後の移植周期における「<span class="font-weight-bold text-danger">移植前</span>」の各ホルモン値</p>
                          <%= f.fields_for :before_ishoku_hormones do |before_ishoku_hormone| %>
                            <%= render "before_ishoku_hormone_fields", f: before_ishoku_hormone %>
                          <% end %>
                          <div class="links pt-2 pl-2">
                            <%= link_to_add_association "+ 追加", f, :before_ishoku_hormones %>
                          </div>
                          <div class="alert alert-info small rounded-lg px-2">
                            <span class="small text-muted">
                              <span class="text-danger"><u>入力される場合は「<strong>D</strong>&nbsp;<span class="text-muted">(Day)</span>」だけは必ず選択して下さい。</u></span><br>
                              D以外は空でも問題ありません。各種ホルモン値は「半角数字」で入力下さい。必要なだけ行を追加できます。移植日当日･移植後も同様の入力欄が以降にあります。
                            </span>
                          </div>
                        </div>

                        <div class="form-group day_of_shokihaiishoku">
                          <p>初期胚の「<span class="text-danger font-weight-bold">移植当日</span>」の各ホルモン値と内膜の厚さ</p>
                          <%= f.fields_for :day_of_shokihaiishokus do |day_of_shokihaiishoku| %>
                            <table class="table table-sm table-bordered table-hover mb-0">
                              <thead>
                                <tr>
                                  <th scope="col" class="hormon-label">D&nbsp;<span class="small"><small class="text-info">(必須)</small></span></th>
                                  <th scope="col" class="hormon-label">E2</th>
                                  <th scope="col" class="hormon-label">FSH</th>
                                  <th scope="col" class="hormon-label">LH</th>
                                  <th scope="col" class="hormon-label">P4</th>
                                  <th scope="col" class="hormon-label">内膜<span class="small text-muted"><small>(mm)</small></span></th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr>
                                  <th scope="row" class="day-column"><%= day_of_shokihaiishoku.select :day, Report.make_select_day_of_shokihaiishoku, { prompt: "まず選択" }, { class: "form-control text-muted" } %></td>
                                  <td class="hormon-column"><%= day_of_shokihaiishoku.number_field :e2, { step: "0.01", class: "form-control", placeholder: "pg/ml" } %></td>
                                  <td class="hormon-column"><%= day_of_shokihaiishoku.number_field :fsh, { step: "0.01", class: "form-control", placeholder: "mIU/ml" } %></td>
                                  <td class="hormon-column"><%= day_of_shokihaiishoku.number_field :lh, { step: "0.01", class: "form-control", placeholder: "mIU/ml" } %></td>
                                  <td class="hormon-column"><%= day_of_shokihaiishoku.number_field :p4, { step: "0.01", class: "form-control", placeholder: "ng/ml" } %></td>
                                  <td class="hormon-column"><%= day_of_shokihaiishoku.number_field :endometrial_thickness, { step: "0.1", class: "form-control" } %></td>
                                </tr>
                              </tbody>
                            </table>
                          <% end %>
                          <div class="alert alert-info small rounded-lg px-2 mt-2">
                            <span class="small text-muted">
                              <span class="text-danger"><u>入力される場合は「<strong>D</strong>&nbsp;<span class="text-muted">(Day)</span>」だけは必ず選択して下さい。</u></span><br>
                              D以外は空でも問題ありません。各種ホルモン値は「半角数字」で入力下さい。移植後も同様の入力欄が以降にあります。
                            </span>
                          </div>
                        </div>

                        <div class="form-group day_of_haibanhoishoku">
                          <p>胚盤胞の「<span class="text-danger font-weight-bold">移植当日</span>」の各ホルモン値と内膜の厚さ</p>
                          <%= f.fields_for :day_of_haibanhoishokus do |day_of_haibanhoishoku| %>
                            <table class="table table-sm table-bordered table-hover mb-0">
                              <thead>
                                <tr>
                                  <th scope="row" class="day-column">D&nbsp;<span class="small"><small class="text-info">(必須)</small></span></th>
                                  <th scope="col" class="hormon-label">E2</th>
                                  <th scope="col" class="hormon-label">FSH</th>
                                  <th scope="col" class="hormon-label">LH</th>
                                  <th scope="col" class="hormon-label">P4</th>
                                  <th scope="col" class="hormon-label">内膜<span class="small text-muted"><small>(mm)</small></span></th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr>
                                  <td class="hormon-column"><%= day_of_haibanhoishoku.select :day, Report.make_select_day_of_haibanhoishoku, { prompt: "まず選択" }, { class: "form-control text-muted" } %></td>
                                  <td class="hormon-column"><%= day_of_haibanhoishoku.number_field :e2, { step: "0.01", class: "form-control", placeholder: "pg/ml" } %></td>
                                  <td class="hormon-column"><%= day_of_haibanhoishoku.number_field :fsh, { step: "0.01", class: "form-control", placeholder: "mIU/ml" } %></td>
                                  <td class="hormon-column"><%= day_of_haibanhoishoku.number_field :lh, { step: "0.01", class: "form-control", placeholder: "mIU/ml" } %></td>
                                  <td class="hormon-column"><%= day_of_haibanhoishoku.number_field :p4, { step: "0.01", class: "form-control", placeholder: "ng/ml" } %></td>
                                  <td class="hormon-column"><%= day_of_haibanhoishoku.number_field :endometrial_thickness, { step: "0.01", class: "form-control" } %></td>
                                </tr>
                              </tbody>
                            </table>
                          <% end %>
                          <div class="alert alert-info small rounded-lg px-2 mt-2">
                            <span class="small text-muted">
                              <span class="text-danger"><u>入力される場合は「<strong>D</strong>&nbsp;<span class="text-muted">(Day)</span>」だけは必ず選択して下さい。</u></span><br>
                              D以外は空でも問題ありません。各種ホルモン値は「半角数字」で入力下さい。移植後も同様の入力欄が以降にあります。
                            </span>
                          </div>
                        </div>

                        <div class="form-group shokihaiishoku-hormone">
                          <p>初期胚移植周期における「<span class="font-weight-bold text-danger">移植後</span>」の各ホルモン値</p>
                          <%= f.fields_for :shokihaiishoku_hormones do |shokihaiishoku_hormone| %>
                            <%= render "shokihaiishoku_hormone_fields", f: shokihaiishoku_hormone %>
                          <% end %>
                          <div class="links pt-2 pl-2">
                            <%= link_to_add_association "+ 追加", f, :shokihaiishoku_hormones %>
                          </div>
                          <div class="alert alert-info small rounded-lg px-2">
                            <span class="small text-muted">
                              <span class="text-danger"><u>入力される場合は「ET」だけは必ず選択して下さい。</u></span><br>
                              ET以外は空でも問題ありません。各種ホルモン値は「半角数字」で入力下さい。必要なだけ行を追加できます。
                            </span>
                          </div>
                        </div>

                        <div class="form-group early_embryo_grade">
                          <div class="label p-1"><%= f.label :early_embryo_grade, '初期胚のグレード', class: "question-matters" %></div>
                          <%= f.select :early_embryo_grade, Report::HASH_EARLY_EMBRYO_GRADE.invert, { prompt: "選択" }, { class: "form-control" }  %>
                          <div class="form-group">
                            <div class="label p-1"><%= f.label :early_embryo_grade_supplementary_explanation, '初期胚のグレードについての補足説明', class: "question-matters" %></div>
                            <%= f.text_area :early_embryo_grade_supplementary_explanation, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例)上記で〇〇を選びましたが、私のクリニックでは〇〇と呼ばれていました" %>
                          </div>
                        </div>

                        <div class="form-group haibanhoishoku-hormone">
                          <p>胚盤胞移植周期における「<span class="font-weight-bold text-danger">移植後</span>」の各ホルモン値</p>
                          <%= f.fields_for :haibanhoishoku_hormones do |haibanhoishoku_hormone| %>
                            <%= render "haibanhoishoku_hormone_fields", f: haibanhoishoku_hormone %>
                          <% end %>
                          <div class="links pt-2 pl-2">
                            <%= link_to_add_association "+ 追加", f, :haibanhoishoku_hormones %>
                          </div>
                          <div class="alert alert-info small rounded-lg px-2">
                            <span class="small text-muted">
                              <span class="text-danger"><u>入力される場合は「BT」だけは必ず選択して下さい。</u></span><br>BT以外は空でも問題ありません。
                              各種ホルモン値は「半角数字」で入力下さい。必要なだけ行を追加できます。
                            </span>
                          </div>
                        </div>

                        <div class="form-group blastocyst_grade1">
                          <div class="label p-1"><%= f.label :blastocyst_grade1, '胚盤胞のグレード', class: "question-matters" %></div>
                          <%= f.select :blastocyst_grade1, Report::HASH_BLASTOCYST_GRADE1.invert, { prompt: "選択" }, { class: "form-control" }  %>
                          <p class="small pt-4 pb-2 mb-0">グレードの補足説明</p>
                            <%= f.text_area :blastocyst_grade1_supplementary_explanation, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例)上記で〇〇を選びましたが、私のクリニックでは〇〇と呼ばれていました" %>
                        </div>

                        <div class="form-group blastocyst_grade2">
                          <div class="label p-1"><%= f.label :blastocyst_grade2, '胚盤胞の評価', class: "question-matters" %></div>
                          <%= f.select :blastocyst_grade2, Report::HASH_BLASTOCYST_GRADE2.invert, { prompt: "選択" }, { class: "form-control" }  %>
                          <p class="small pt-4 pb-2 mb-0">評価の補足説明</p>
                            <%= f.text_area :blastocyst_grade2_supplementary_explanation, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例)上記で〇〇を選びましたが、私のクリニックでは〇〇と呼ばれていました" %>
                        </div>

                        <div class="form-group">
                          <div class="label p-1"><%= f.label :pregnancy_date, '移植後の判定日は移植から何日目でしたか', class: "question-matters" %></div>
                          <%= f.select :pregnancy_date, Report::HASH_PREGNANCY_DATE.invert, { prompt: "選択" }, { class: "form-control" }  %>
                          <p class="small pt-4 pb-2 mb-0">判定日の補足説明</p>
                          <%= f.text_area :pregnancy_date_memo, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例文入れる" %>
                        </div>

                        <div class="form-group">
                          <div class="label p-1"><%= f.label :number_of_eggs_stored, 'このクリニックにある凍結胚の数(貯卵数)', class: "question-matters" %></div>
                          <%= f.select :number_of_eggs_stored, Report::HASH_NUMBER_OF_EGGS_STORED.invert, { prompt: "選択" }, { class: "form-control" }  %>
                        </div>

                        <div class="form-group">
                          <div class="label p-1"><%= f.label :explanation_and_impression_about_ishoku, '移植まとめ', class: "question-matters" %></div>
                          <%= f.text_area :explanation_and_impression_about_ishoku, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "移植に関しての感想や情報を載せて下さい" %>
                        </div>
                      </div>
                    </div>
                    <div class="parent-tab-content mostleft-tab p-2" id="right_tab3">
                      <div class="alert alert-light rounded-lg border p-2 mb-0 text-dark" role="alert">
                        <div class="alert alert-info rounded-lg border mt-3 mb-0 text-dark small" role="alert">
                          <p class="mb-0">このクリニックでの過去の移植結果を分かる範囲で教えて下さい。<br>複数回移植をされている場合には「追加」ボタンで追加できます。</p>
                        </div>
                        <div class="form-group mt-0 pt-0">
                          <p><span class="text-danger font-weight-bold"></p>
                          <%= f.fields_for :unsuccessful_ishoku_cycles do |unsuccessful_ishoku_cycle| %>
                            <%= render "unsuccessful_ishoku_cycle_fields", f: unsuccessful_ishoku_cycle %>
                          <% end %>
                          <div class="links pt-2 pl-2">
                            <%= link_to_add_association "+ 追加", f, :unsuccessful_ishoku_cycles %>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </section>
              <section class="child-tab-content" id="tab_2_5">
                <div class="scroll-box">
                  <div class="form-group mt-0">
                    <div class="label p-1"><%= f.label :cost, 'このクリニックでの治療費用総額', class: "question-matters" %></div>
                    <%= f.select :cost, Report::HASH_COST.invert, { prompt: "選択" }, { class: "form-control" }  %>
                  </div>

                  <div class="form-group">
                    <div class="label p-1"><%= f.label :sairan_cost, '採卵1回あたりの費用(概算)', class: "question-matters" %></div>
                    <%= f.select :sairan_cost, Report::HASH_SAIRAN_COST.invert, { prompt: "選択" }, { class: "form-control" }  %>
                    <p class="small pt-4 pb-2 mb-0">採卵費用の補足説明</p>
                    <%= f.text_area :sairan_cost_explanation, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例)" %>
                  </div>

                  <div class="form-group">
                    <div class="label p-1"><%= f.label :ishoku_cost, '移植1回あたりの費用(概算)', class: "question-matters" %></div>
                    <%= f.select :ishoku_cost, Report::HASH_ISHOKU_COST.invert, { prompt: "選択" }, { class: "form-control" }  %>
                    <p class="small pt-4 pb-2 mb-0">移植費用の補足説明</p>
                    <%= f.text_area :ishoku_cost_explanation, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例)" %>
                  </div>

                  <div class="form-group">
                    <div class="label p-1"><%= f.label :credit_card_validity, 'クレジットカードの使用可否', class: "question-matters" %></div>
                    <%= f.select :credit_card_validity, Report::HASH_CREDIT_CARD_VALIDITY.invert, { prompt: "選択" }, { class: "form-control" }  %>
                  </div>

                  <div class="form-group">
                    <div class="label p-1 pb-3"><span class="question-matters"><%= f.label :f_surgery, '費用の負担/拠出者' %></span><br>
                      <small class="text-muted small">このクリニックでの治療費用の負担/拠出者を選択して下さい</small>
                    </div>
                    <%= f.collection_check_boxes(:cost_burden_ids, CostBurden.all, :id, :name) do |b| %>
                      <div class="form-check form-check-inline checkbox">
                        <%= b.label class: "form-check-label" do %>
                          <%= b.check_box class: "form-check-input" %>
                          <%= b.text %>
                        <% end %>
                      </div>
                    <% end %>
                  </div>

                  <div class="form-group amount_that_can_be_activated m-1">
                    <div class="label p-1"><%= f.label :creditcards_can_be_used_from_more_than, '使用可能な最低額', class: "question-matters" %></div>
                    <div class="row p-0 m-0">
                      <div class="col-8 p-0 m-0">
                        <%= f.number_field :creditcards_can_be_used_from_more_than, { class: "form-control" } %>
                      </div>
                      <div class="col-4 p-0 m-0">
                        円以上
                      </div>
                    </div>
                    <small id="poster-tip" class="form-text text-muted">
                      <span><font color="#FF0000">半角数字で入力して下さい。</font></span>
                    </small>
                  </div>

                  <div class="form-group mt-2">
                    <div class="label p-1"><%= f.label :explanation_of_cost, '治療費用まとめ', class: "question-matters" %></div>
                    <%= f.text_area :explanation_of_cost, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例)〇〇検査など他のクリニックと比べるととても高かったです" %>
                  </div>
                </div>
              </section>
            </div>
          </section>
          <section class="parent-tab-content" id="tab_3">
            <div class="child-tab">
              <ul class="nav nav-tabs child-menu">
                <li><a href="#tab_3_1" class="active" data-toggle="tab">治療歴</a></li>
                <li><a href="#tab_3_2" data-toggle="tab">不育症</a></li>
                <li><a href="#tab_3_3" data-toggle="tab">仕事</a></li>
                <li><a href="#tab_3_4" data-toggle="tab">サプリ</a></li>
              </ul>
              <section class="child-tab-content active pt-4" id="tab_3_1">
                <div class="scroll-box">
                  <div class="parent-tab">
                    <ul class="nav nav-tabs parent-menu mt-0 pt-0">
                      <li><a href="#left_tab5" class="active mostleft-tab" data-toggle="tab">女性</a></li>
                      <li><a href="#right_tab5" data-toggle="tab">男性</a></li>
                    </ul>
                    <div class="parent-tab-content active mostleft-tab p-2" id="left_tab5">
                      <div class="alert alert-light rounded-lg border p-2 mb-0 text-dark" role="alert">
                        <div class="form-group mt-0">
                          <div class="label p-1 pb-3"><span class="question-matters"><%= f.label :inspection, '基本検査(女性)' %></span> <br>
                            <small class="text-muted small">このクリニック以外でこれまでに受けた基本検査全てを選択下さい</small>
                          </div>
                          <%= f.collection_check_boxes(:inspection_ids, Inspection.all, :id, :name) do |b| %>
                            <div class="form-check form-check-inline checkbox">
                              <%= b.label class: "form-check-label" do %>
                                <%= b.check_box class: "form-check-input" %>
                                <%= b.text %>
                              <% end %>
                            </div>
                          <% end %>
                          <p class="small pt-4 pb-2 mb-0">基本検査の補足説明</p>
                          <%= f.text_area :inspection_supplementary_explanation, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "検査結果などの補足情報があれば入力して下さい" %>
                        </div>

                        <div class="form-group">
                          <div class="label p-1 pb-3"><span class="question-matters"><%= f.label :f_surgery, '手術既往歴(女性)' %></span><br>
                            <small class="text-muted small">これまでに受けた手術があれば選択下さい</small>
                          </div>
                          <%= f.collection_check_boxes(:f_surgery_ids, FSurgery.all, :id, :name) do |b| %>
                            <div class="form-check form-check-inline checkbox">
                              <%= b.label class: "form-check-label" do %>
                                <%= b.check_box class: "form-check-input" %>
                                <%= b.text %>
                              <% end %>
                            </div>
                          <% end %>
                          <% if false %>
                          <div class="form-group pt-2">
                            <div class="label p-1"><%= f.label :f_surgery, "上記選択肢に無いので新たに手術を追加する", class: "question-matters" %></div>
                            <%= text_field_tag :fs_name, "", class: "form-control", placeholder: "半角カンマ区切り" %>
                            <small id="poster-tip" class="form-text text-warning">
                              <span class="small">複数ある場合は「半角カンマ」で区切って下さい。</span>
                            </small>
                          </div>
                          <% end %>
                          <p class="small pt-4 pb-2 mb-0">手術既往歴の補足説明</p>
                          <%= f.text_area :f_surgery_memo, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例)" %>
                        </div>

                        <div class="form-group">
                          <div class="label p-1 pb-3"><span class="question-matters"><%= f.label :f_infertility_factor, '不妊原因(女性)' %></span><br>
                            <small class="text-muted small">これまでに判明している原因があれば選択下さい</small>
                          </div>
                          <%= f.collection_check_boxes(:f_infertility_factor_ids, FInfertilityFactor.all, :id, :name) do |b| %>
                            <div class="form-check form-check-inline checkbox checkbox">
                              <%= b.label class: "form-check-label" do %>
                                <%= b.check_box class: "form-check-input" %>
                                <%= b.text %>
                              <% end %>
                            </div>
                          <% end %>
                          <% if false %>
                          <div class="form-group pt-2">
                            <div class="label p-1"><%= f.label :f_infertility_factor, "上記選択肢に無いので新たに不妊原因を追加する", class: "question-matters" %></div>
                            <%= text_field_tag :fif_name, "", class: "form-control", placeholder: "半角カンマ区切り" %>
                            <small id="poster-tip" class="form-text text-warning">
                              <span class="small">複数ある場合は「半角カンマ」で区切って下さい。</span>
                            </small>
                          </div>
                          <% end %>
                          <p class="small pt-4 pb-2 mb-0">不妊原因の補足説明</p>
                          <%= f.text_area :f_infertility_memo, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例)" %>
                        </div>

                        <div class="form-group">
                          <div class="label p-1 pb-3"><span class="question-matters"><%= f.label :f_disease, '疾患(女性)' %></span><br>
                            <small class="text-muted small">これまでに判明している原因があれば選択下さい</small>
                          </div>
                          <%= f.collection_check_boxes(:f_disease_ids, FDisease.all, :id, :name) do |b| %>
                            <div class="form-check form-check-inline checkbox">
                              <%= b.label class: "form-check-label" do %>
                                <%= b.check_box class: "form-check-input" %>
                                <%= b.text %>
                              <% end %>
                            </div>
                          <% end %>
                          <% if false %>
                          <div class="form-group pt-2">
                            <div class="label p-1"><%= f.label :f_disease, "上記選択肢に無いので新たに疾患を追加する", class: "question-matters" %></div>
                            <%= text_field_tag :fd_name, "", class: "form-control", placeholder: "半角カンマ区切り" %>
                            <small id="poster-tip" class="form-text text-warning">
                              <span class="small">複数ある場合は「半角カンマ」で区切って下さい。</span>
                            </small>
                          </div>
                          <% end %>
                          <p class="small pt-4 pb-2 mb-0">疾患の補足説明</p>
                          <%= f.text_area :f_disease_memo, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例)" %>
                        </div>
                      </div>
                    </div>
                    <div class="parent-tab-content p-2" id="right_tab5">
                      <div class="alert alert-light rounded-lg border p-2 mb-0 text-dark" role="alert">
                        <div class="form-group mt-0">
                          <div class="label p-1 pb-3"><span class="question-matters"><%= f.label :male_inspection, '基本検査(男性)' %></span> <br>
                            <small class="text-muted small">このクリニック以外でこれまでに受けた基本検査全てを選択下さい</small>
                          </div>
                          <%= f.collection_check_boxes(:male_inspection_ids, MaleInspection.all, :id, :name) do |b| %>
                            <div class="form-check form-check-inline checkbox">
                              <%= b.label class: "form-check-label" do %>
                                <%= b.check_box class: "form-check-input" %>
                                <%= b.text %>
                              <% end %>
                            </div>
                          <% end %>
                          <p class="small pt-4 pb-2 mb-0">基本検査の補足説明</p>
                          <%= f.text_area :inspection_supplementary_explanation_men, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "検査結果などの補足情報があれば入力して下さい" %>
                        </div>

                        <div class="form-group">
                          <div class="label p-1 pb-3"><span class="question-matters"><%= f.label :m_surgery, '手術既往歴(男性)' %></span><br>
                            <small class="text-muted small">これまでに受けた手術があれば選択下さい</small>
                          </div>
                          <%= f.collection_check_boxes(:m_surgery_ids, MSurgery.all, :id, :name) do |b| %>
                            <div class="form-check form-check-inline checkbox">
                              <%= b.label class: "form-check-label" do %>
                                <%= b.check_box class: "form-check-input" %>
                                <%= b.text %>
                              <% end %>
                            </div>
                          <% end %>
                          <% if false %>
                          <div class="form-group pt-2">
                            <div class="label p-1"><%= f.label :m_surgery, "上記選択肢に無いので新たに手術を追加する", class: "question-matters" %></div>
                            <%= text_field_tag :ms_name, "", class: "form-control", placeholder: "半角カンマ区切り" %>
                          </div>
                          <small id="poster-tip" class="form-text text-warning">
                            <span class="small">複数ある場合は「半角カンマ」で区切って下さい。</span>
                          </small>
                          <% end %>
                          <p class="small pt-4 pb-2 mb-0">手術既往歴の補足説明</p>
                          <%= f.text_area :m_surgery_memo, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例)" %>
                        </div>

                        <div class="form-group">
                          <div class="label p-1 pb-3"><span class="question-matters"><%= f.label :m_infertility_factor, '不妊原因(男性)' %></span><br>
                            <small class="text-muted small">これまでに判明している原因があれば選択下さい</small>
                          </div>
                          <%= f.collection_check_boxes(:m_infertility_factor_ids, MInfertilityFactor.all, :id, :name) do |b| %>
                            <div class="form-check form-check-inline checkbox">
                              <%= b.label class: "form-check-label" do %>
                                <%= b.check_box class: "form-check-input" %>
                                <%= b.text %>
                              <% end %>
                            </div>
                          <% end %>
                          <% if false %>
                          <div class="form-group pt-2">
                            <div class="label p-1"><%= f.label :m_infertility_factor, "上記選択肢に無いので新たに不妊原因を追加する" , class: "question-matters" %></div>
                              <%= text_field_tag :mif_name, "", class: "form-control", placeholder: "半角カンマ区切り" %>
                              <small id="poster-tip" class="form-text text-warning">
                              <span class="small">複数ある場合は「半角カンマ」で区切って下さい。</span>
                            </small>
                          </div>
                          <% end %>
                          <p class="small pt-4 pb-2 mb-0">不妊原因の補足説明</p>
                          <%= f.text_area :m_infertility_memo, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例)" %>
                        </div>

                        <div class="form-group">
                          <div class="label p-1 pb-3"><span class="question-matters"><%= f.label :m_disease, '疾患(男性)' %></span><br>
                            <small class="text-muted small">これまでに判明している原因があれば選択下さい</small>
                          </div>
                          <%= f.collection_check_boxes(:m_disease_ids, MDisease.all, :id, :name) do |b| %>
                            <div class="form-check form-check-inline checkbox">
                              <%= b.label class: "form-check-label" do %>
                                <%= b.check_box class: "form-check-input" %>
                                <%= b.text %>
                              <% end %>
                            </div>
                          <% end %>
                          <% if false %>
                            <div class="form-group pt-2">
                              <div class="label p-1"><%= f.label :m_disease, "上記選択肢に無いので新たに疾患を追加する", class: "question-matters" %></div>
                              <%= text_field_tag :md_name, "", class: "form-control", placeholder: "半角カンマ区切り" %>
                              <small id="poster-tip" class="form-text text-warning">
                                <span class="small">複数ある場合は「半角カンマ」で区切って下さい。</span>
                              </small>
                            </div>
                          <% end %>
                          <p class="small pt-4 pb-2 mb-0">疾患の補足説明</p>
                          <%= f.text_area :m_disease_memo, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例)" %>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </section>
              <section class="child-tab-content" id="tab_3_2">
                <div class="scroll-box">
                  <div class="form-group mt-0">
                    <div class="label p-1"><%= f.label :fuiku, '不育症の有無', class: "question-matters" %></div>
                    <%= f.select :fuiku, Report::HASH_FUIKU.invert, { prompt: "選択" }, { class: "form-control" } %>
                  </div>

                  <div class="form-group">
                    <div class="label p-1 pb-3"><span class="question-matters"><%= f.label :fuiku_inspection, '不育原因' %></span>
                    </div>
                    <%= f.collection_check_boxes(:fuiku_inspection_ids, FuikuInspection.all, :id, :name) do |b| %>
                      <div class="form-check checkbox">
                        <%= b.label class: "form-check-label" do %>
                          <%= b.check_box class: "form-check-input" %>
                          <%= b.text %>
                        <% end %>
                      </div>
                    <% end %>
                  </div>

                  <div class="form-group">
                    <div class="label p-1"><%= f.label :fuiku_supplementary_explanation, '不育症について', class: "question-matters" %></div>
                    <%= f.text_area :fuiku_supplementary_explanation, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例)不育症は〇〇クリニックで検査を受けてわかりました" %>
                  </div>
                </div>
              </section>
              <section class="child-tab-content" id="tab_3_3">
                <div class="scroll-box">
                  <div class="form-group mt-0">
                    <div class="label p-1"><%= f.label :work_style, '治療当時の働き方', class: "question-matters" %></div>
                    <%= f.select :work_style, Report::HASH_WORK_STYLE.invert, { prompt: "選択" }, { class: "form-control" }  %>
                    <small id="poster-tip" class="form-text text-muted text-right pt-2"><%= f.check_box :work_style_status, {}, "hide", "show" %>非公開</small>
                  </div>

                  <div class="form-group">
                    <div class="label p-1"><%= f.label :industry_type, '業種', class: "question-matters" %></div>
                    <%= f.select :industry_type, Report::HASH_INDUSTRY_TYPE.invert, { prompt: "選択" }, { class: "form-control" }  %>
                    <small id="poster-tip" class="form-text text-muted text-right pt-2"><%= f.check_box :industry_type_status, {}, "hide", "show" %>非公開</small>
                  </div>

                  <div class="form-group">
                    <div class="label p-1"><%= f.label :treatment_support_system, '職場での不妊治療支援制度の有無', class: "question-matters" %></div>
                    <%= f.select :treatment_support_system, Report::HASH_TREATMENT_SUPPORT_SYSTEM.invert, { prompt: "選択" }, { class: "form-control" }  %>
                  </div>

                  <div class="form-group">
                    <div class="label p-1"><%= f.label :suspended_or_retirement_job, '休職や退職の有無', class: "question-matters" %></div>
                    <%= f.select :suspended_or_retirement_job, Report::HASH_SUSPENDED_OR_RETIREMENT_JOB.invert, { prompt: "選択" }, { class: "form-control" }  %>
                  </div>

                  <div class="form-group">
                    <div class="label p-1"><%= f.label :household_net_income, '治療当時の夫婦合算所得', class: "question-matters" %></div>
                    <%= f.select :household_net_income, Report::HASH_HOUSEHOLD_NET_INCOME.invert, { prompt: "選択" }, { class: "form-control" }  %>
                    <small id="poster-tip" class="form-text text-muted">
                      <span class="small text-warning">所得&nbsp;=&nbsp;収入&nbsp;-&nbsp;経費</span>
                    </small>
                    <small id="poster-tip" class="form-text text-muted text-right pt-0 mt-0"><%= f.check_box :household_net_income_status, {}, "hide", "show" %>非公開</small>
                  </div>

                  <div class="work-style-item col-12 pt-3 px-0">
                    <div class="label p-1"><%= f.label :about_work_and_working_style, '仕事関連について', class: "question-matters" %></div>
                    <%= f.text_area :about_work_and_working_style, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例)治療の理解がなかなか得られず配置転換を希望しなんとか治療を継続しました" %>
                  </div>
                </div>
              </section>
              <section class="child-tab-content pt-4" id="tab_3_4">
                <div class="scroll-box">
                  <div class="parent-tab">
                    <ul class="nav nav-tabs parent-menu mt-0 pt-0">
                      <li><a href="#left_tab4" class="active mostleft-tab" data-toggle="tab">女性</a></li>
                      <li><a href="#right_tab4" data-toggle="tab">男性</a></li>
                    </ul>
                    <div class="parent-tab-content active mostleft-tab p-2" id="left_tab4">
                      <div class="alert alert-light rounded-lg border p-2 mb-0 text-dark" role="alert">
                        <div class="form-group mt-0">
                          <p>治療時の使用サプリ</p>
                          <%= f.collection_check_boxes(:supplement_ids, Supplement.all, :id, :name) do |b| %>
                          <div class="form-check form-check-inline checkbox">
                            <%= b.label class: "form-check-label" do %>
                              <%= b.check_box class: "form-check-input" %>
                              <%= b.text %>
                            <% end %>
                          </div>
                          <% end %>
                        </div>
                        <% if false %>
                        <div class="form-group pt-3">
                          <div class="label p-1"><%= f.label :supplement, "上記選択肢に無いので新たにサプリ名を追加する", class: "question-matters" %></div>
                          <%= text_field_tag :supplement_name, "", class: "form-control", placeholder: "半角カンマ区切り" %>
                          <small id="poster-tip" class="form-text text-warning">
                            <span class="small">複数ある場合は「半角カンマ」で区切って下さい。</span>
                          </small>
                        </div><br>
                        <% end %>
                        <div class="form-group pt-0">
                          <div class="label p-1"><%= f.label :f_supplement_cost, '治療時のサプリ平均購入額(月)', class: "question-matters" %></div>
                          <%= f.select :f_supplement_cost, Report::HASH_SUPPLEMENT_COST.invert, { prompt: "選択" }, { class: "form-control" } %>
                          <p class="small pt-4 pb-2 mb-0">サプリの補足情報</p>
                          <%= f.text_area :f_supplement_memo, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例)最初はネットで調べて買っていましたが、途中からクリニックで販売していた〇〇サプリに切り替えました。お値段は〇〇円位でした。" %>
                        </div>

                        <div class="form-group">
                          <div class="label p-1"><span class="question-matters"><%= f.label :other_effort, 'クリニックでの治療以外に行ったこと(女性)' %></span></div><br>
                          <%= f.collection_check_boxes(:other_effort_ids, OtherEffort.all, :id, :name) do |b| %>
                            <div class="form-check form-check-inline checkbox">
                              <%= b.label class: "form-check-label" do %>
                                <%= b.check_box class: "form-check-input" %>
                                <%= b.text %>
                              <% end %>
                            </div>
                          <% end %>
                          <% if false %>
                          <class="form-group pt-2">
                            <div class="label p-1"><%= f.label :other_effort, "上記選択肢に無いので新たに治療以外に行ったことを追加する", class: "question-matters" %></div>
                            <%= text_field_tag :oe_name, "", class: "form-control", placeholder: "半角カンマ区切り" %>
                            <small id="poster-tip" class="form-text text-warning">
                              <span class="small">複数ある場合は「半角カンマ」で区切って下さい。</span>
                            </small>
                          </div>
                          <% end %>
                        </div>
                        <div class="form-group pt-2">
                          <div class="label p-1"><%= f.label :f_other_effort_cost, 'クリニックでの治療以外への月額平均投資額', class: "question-matters" %></div>
                          <%= f.select :f_other_effort_cost, Report::HASH_OTHER_EFFORT_COST.invert, { prompt: "選択" }, { class: "form-control" } %>
                          <p class="small pt-4 pb-2 mb-0">クリニックでの治療以外に行ったことの補足説明</p>
                          <%= f.text_area :f_other_effort_memo, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例)〇〇漢方鍼灸院にて漢方治療のみを◯年行なっていました。" %>
                        </div>
                      </div>
                    </div>
                    <div class="parent-tab-content mostleft-tab p-2" id="right_tab4">
                      <div class="alert alert-light rounded-lg border p-2 mb-0 text-dark" role="alert">
                        <div class="form-group mt-0">
                          <p>治療時の使用サプリ</p>
                          <%= f.collection_check_boxes(:m_supplement_ids, MSupplement.all, :id, :name) do |b| %>
                          <div class="form-check form-check-inline checkbox">
                            <%= b.label class: "form-check-label" do %>
                              <%= b.check_box class: "form-check-input" %>
                              <%= b.text %>
                            <% end %>
                          </div>
                          <% end %>
                        </div>
                        <% if false %>
                        <div class="form-group pt-3">
                          <div class="label p-1"><%= f.label :m_supplement, "上記選択肢に無いので新たにサプリ名を追加する", class: "question-matters" %></div>
                          <%= text_field_tag :m_supplement_name, "", class: "form-control", placeholder: "半角カンマ区切り" %>
                          <small id="poster-tip" class="form-text text-warning">
                            <span class="small">複数ある場合は「半角カンマ」で区切って下さい。</span>
                          </small>
                        </div><br>
                        <% end %>
                        <div class="form-group pt-0">
                          <div class="label p-1"><%= f.label :m_supplement_cost, '治療時のサプリ平均購入額(月)', class: "question-matters" %></div>
                          <%= f.select :m_supplement_cost, Report::HASH_SUPPLEMENT_COST.invert, { prompt: "選択" }, { class: "form-control" } %>
                          <p class="small pt-4 pb-2 mb-0">サプリの補足情報</p>
                          <%= f.text_area :m_supplement_memo, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例)最初はネットで調べて買っていましたが、途中からクリニックで販売していた〇〇サプリに切り替えました。お値段は〇〇円位でした。" %>
                        </div>

                        <div class="form-group">
                          <div class="label p-1"><span class="question-matters"><%= f.label :m_other_effort, 'クリニックでの治療以外に行ったこと(男性)' %></span></div><br>
                          <%= f.collection_check_boxes(:m_other_effort_ids, MOtherEffort.all, :id, :name) do |b| %>
                            <div class="form-check form-check-inline checkbox">
                              <%= b.label class: "form-check-label" do %>
                                <%= b.check_box class: "form-check-input" %>
                                <%= b.text %>
                              <% end %>
                            </div>
                          <% end %>
                          <% if false %>
                          <class="form-group pt-2">
                            <div class="label p-1"><%= f.label :m_other_effort, "上記選択肢に無いので新たに治療以外に行ったことを追加する", class: "question-matters" %></div>
                            <%= text_field_tag :oe_name, "", class: "form-control", placeholder: "半角カンマ区切り" %>
                            <small id="poster-tip" class="form-text text-warning">
                              <span class="small">複数ある場合は「半角カンマ」で区切って下さい。</span>
                            </small>
                          </div>
                          <% end %>
                        </div>
                        <div class="form-group pt-2">
                          <div class="label p-1"><%= f.label :m_other_effort_cost, 'クリニックでの治療以外への月額平均投資額', class: "question-matters" %></div>
                          <%= f.select :m_other_effort_cost, Report::HASH_OTHER_EFFORT_COST.invert, { prompt: "選択" }, { class: "form-control" } %>
                          <p class="small pt-4 pb-2 mb-0">クリニックでの治療以外に行ったことの補足説明</p>
                          <%= f.text_area :m_other_effort_memo, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例)〇〇漢方鍼灸院にて漢方治療のみを◯年行なっていました。" %>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </section>
            </div>
          </section>
          <section class="parent-tab-content" id="tab_4">
            <div class="child-tab">
              <ul class="nav nav-tabs child-menu">
                <li><a href="#tab_4_1" class="active" data-toggle="tab">満足度評価</a></li>
                <li><a href="#tab_4_2" data-toggle="tab">追跡調査</a></li>
              </ul>
              <section class="child-tab-content active" id="tab_4_1">
                <div class="scroll-box">
                  <div class="form-group mt-0">
                    <div class="mt-0 pt-2">
                      <div class="label p-1 mb-3"><%= f.label :average_waiting_time2, '待ち時間', class: "question-matters" %></div>
                      <span class="small text-muted">低</span>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :average_waiting_time2, 1, onclick: "radioDeselection(this, 1)" %>1
                      </label>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :average_waiting_time2, 2, onclick: "radioDeselection(this, 2)" %>2
                      </label>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :average_waiting_time2, 3, onclick: "radioDeselection(this, 3)" %>3
                      </label>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :average_waiting_time2, 4, onclick: "radioDeselection(this, 4)" %>4
                      </label>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :average_waiting_time2, 5, onclick: "radioDeselection(this, 5)" %>5
                      </label>&nbsp;&nbsp;<span class="small text-muted">高</span>
                      <div class="form-group mt-3 mb-0">
                        <p class="m-0 small">クリニックでの平均待ち時間</p>
                        <%= f.select :average_waiting_time, Report::HASH_AVERAGE_WAITING_TIME.invert, { prompt: "選択" }, { class: "form-control" }  %>
                      </div>
                    </div>

                    <div class="mt-5 pt-3">
                      <div class="label p-1 mb-3"><%= f.label :doctor_quality, '医師の対応や雰囲気', class: "question-matters" %></div>
                      <span class="small text-muted">低</span>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :doctor_quality, 1, onclick: "radioDeselection(this, 1)" %>1
                      </label>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :doctor_quality, 2, onclick: "radioDeselection(this, 2)" %>2
                      </label>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :doctor_quality, 3, onclick: "radioDeselection(this, 3)" %>3
                      </label>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :doctor_quality, 4, onclick: "radioDeselection(this, 4)" %>4
                      </label>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :doctor_quality, 5, onclick: "radioDeselection(this, 5)" %>5
                      </label>&nbsp;&nbsp;<span class="small text-muted">高</span>
                    </div>

                    <div class="mt-5 pt-3">
                      <div class="label p-1 mb-3"><%= f.label :staff_quality, 'スタッフの対応や雰囲気', class: "question-matters" %></div>
                      <span class="small text-muted">低</span>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :staff_quality, 1, onclick: "radioDeselection(this, 1)" %>1
                      </label>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :staff_quality, 2, onclick: "radioDeselection(this, 2)" %>2
                      </label>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :staff_quality, 3, onclick: "radioDeselection(this, 3)" %>3
                      </label>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :staff_quality, 4, onclick: "radioDeselection(this, 4)" %>4
                      </label>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :staff_quality, 5, onclick: "radioDeselection(this, 5)" %>5
                      </label>&nbsp;&nbsp;<span class="small text-muted">高</span>
                    </div>

                    <div class="mt-5 pt-3">
                      <div class="label p-1 mb-3"><%= f.label :impression_of_technology, '技術の納得度', class: "question-matters" %></div>
                      <span class="small text-muted">低</span>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :impression_of_technology, 1, onclick: "radioDeselection(this, 1)" %>1
                      </label>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :impression_of_technology, 2, onclick: "radioDeselection(this, 2)" %>2
                      </label>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :impression_of_technology, 3, onclick: "radioDeselection(this, 3)" %>3
                      </label>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :impression_of_technology, 4, onclick: "radioDeselection(this, 4)" %>4
                      </label>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :impression_of_technology, 5, onclick: "radioDeselection(this, 5)" %>5
                      </label>&nbsp;&nbsp;<span class="small text-muted">高</span>
                    </div>

                    <div class="mt-5 pt-3">
                      <div class="label p-1 mb-3"><%= f.label :impression_of_price, '価格の納得度', class: "question-matters" %></div>
                      <span class="small text-muted">低</span>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :impression_of_price, 1, onclick: "radioDeselection(this, 1)" %>1
                      </label>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :impression_of_price, 2, onclick: "radioDeselection(this, 2)" %>2
                      </label>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :impression_of_price, 3, onclick: "radioDeselection(this, 3)" %>3
                      </label>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :impression_of_price, 4, onclick: "radioDeselection(this, 4)" %>4
                      </label>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :impression_of_price, 5, onclick: "radioDeselection(this, 5)" %>5
                      </label>&nbsp;&nbsp;<span class="small text-muted">高</span>
                    </div>

                    <div class="mt-5 pt-3">
                      <div class="label p-1 mb-3"><%= f.label :comfort_of_space, '院内の快適さ', class: "question-matters" %></div>
                      <span class="small text-muted">低</span>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :comfort_of_space, 1, onclick: "radioDeselection(this, 1)" %>1
                      </label>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :comfort_of_space, 2, onclick: "radioDeselection(this, 2)" %>2
                      </label>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :comfort_of_space, 3, onclick: "radioDeselection(this, 3)" %>3
                      </label>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :comfort_of_space, 4, onclick: "radioDeselection(this, 4)" %>4
                      </label>&nbsp;&nbsp;
                      <label class="radio-inline">
                        <%= f.radio_button :comfort_of_space, 5, onclick: "radioDeselection(this, 5)" %>5
                      </label>&nbsp;&nbsp;<span class="small text-muted">高</span>
                    </div>
                    <div class="form-group">
                      <div class="label p-1"><%= f.label :clinic_review, 'その他', class: "question-matters" %></div>
                      <%= f.text_area :clinic_review, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例)待ち時間長く、診察は秒速ですが、技術はとても高いと感じました。" %>
                    </div>
                  </div>
                </div>
              </section>
              <section class="child-tab-content" id="tab_4_2">
                <div class="scroll-box">
                  <div class="alert alert-info small rounded-lg px-2">
                    「出産済み」の方にお聞きします
                  </div>
                  <div class="form-group mt-0 pt-0">
                    <div class="label p-1"><%= f.label :followup_investigation, 'クリニックからの出産確認の追跡調査の有無', class: "question-matters" %></div>
                    <%= f.select :followup_investigation, Report::HASH_FOLLOWUP_INVESTIGATION.invert, { prompt: "選択" }, { class: "form-control" }  %>
                  </div>

                  <div class="form-group">
                    <div class="label p-1"><%= f.label :followup_investigation_memo, 'クリニックからの出産確認の追跡調査についての補足説明', class: "question-matters" %></div>
                    <%= f.text_area :followup_investigation_memo, class: "form-control border", style: "background: rgb(232, 254, 252)", rows: 5, placeholder: "例)" %>
                  </div>
                </div>
              </section>
            </div>
          </section>
        </div>

        <div class="p-2">
          <div class="form-group mt-0">
            <div><%= f.label :title, 'あなたの治療レポコのタイトル', class: "question-matters" %></div>
            <%= f.text_field :title, class: "form-control", placeholder: "最大64文字" %>
          </div>
          <div class="form-group">
            <div class="pb-2"><%= f.label :content, 'このクリニックでの詳しい治療内容を書き残して下さい', class: "question-matters" %></div>
            <%= f.rich_text_area :content, placeholder: "治療内容、数値、費用、CLの雰囲気や感想など、左の質問に対する詳しい説明など交えてたくさんの情報を載せて下さい" %>
            <small id="poster-tip" class="form-text text-muted">
              <span class="mobile-hidden-string">左</span><span class="pc-hidden-string">上</span>の質問を答えてから、または質問を見ながら綴ることで、より詳しいあなた独自のレポコを作成することができます。情報のみならずブログのように思いの丈を綴って下さい。<span class="mobile-hidden-string">左</span><span class="pc-hidden-string">上</span>の記述式回答内容と重複しても構いません。多くの情報を載せて下さい。
            </small>
          </div>
          <div class="form-group border rounded px-3 py-3 mb-5 tag-area">
            <div class="row">
              <div class="col-12">
                <h3>タグ</h3>
                <span class="question-matters"><%= f.label :tag_ids, 'タグをつけることができます(複数選択可)' %></span>
              </div>
              <%= f.collection_check_boxes(:tag_ids, Tag.all, :id, :tag_name) do |tag| %>
                <div class="col-md-4">
                  <div class="form-check form-check-inline checkbox">
                    <%= tag.label class: 'form-check-label' do %>
                      <%= tag.check_box class: 'form-check-input' %>
                      <%= tag.text %>
                    <% end %>
                  </div>
                </div>
              <% end %>
            </div>
            <div class="form-group">
              <div class="label p-1"><%= f.label :name, "新しくタグを追加する", class: "question-matters" %></div>
              <%= text_field_tag :tag_name, "", class: "form-control", placeholder: "半角カンマ区切り" %>
              <small id="poster-tip" class="form-text text-muted">
                <span class="small">1タグ最大15文字まで。複数ある場合は「半角カンマ」で区切って下さい。</span>
              </small>
            </div>
          </div>
        </div>

        <% if false %>
          ユーザー情報として登録させる
          <div class="form-group">
            <div class="label p-1"><%= f.label :all_number_of_sairan, 'このクリニック以外も含めた全採卵「回」数', class: "question-matters" %></div>
            <%= f.select :all_number_of_sairan, Report::HASH_ALL_NUMBER_OF_SAIRAN.invert, { prompt: "選択して下さい" }, { class: "form-control" }  %>
            <small id="poster-tip" class="form-text text-danger">
                前問の回数以上を入力して下さい。
            </small>
          </div>

          <div class="form-group border rounded px-3 py-3">
            <div class="form-group">
              <div class="label p-1"><%= f.label :all_number_of_transplants, 'このクリニック以外も含めた全移植「回」数', class: "question-matters" %></div>
              <%= f.select :all_number_of_transplants, Report::HASH_ALL_NUMBER_OF_TRANSPLANTS.invert, { prompt: "選択して下さい" }, { class: "form-control" }  %>
              <small id="poster-tip" class="form-text text-danger">
                  前問の回数以上を入力して下さい。
              </small>
            </div>
          </div>
        <% end %>

        <% if is_new %>
          <div class="report-post-btn-area">
            <div class="report-post-btn-area-inner">
              <%= f.submit '投稿', class: "report-post-btn-area-btn", data: { confirm: "\n【注意!!!】 (最初にある赤枠で囲われた) 必須項目の\n\n「クリニックを選択」\n「治療当時のお住まい(都道府県&市区町村の両方)」 \n\nは選択されましたか？ \n必ずこの２つの項目を選択してから投稿して下さい!" } %>
              <%= f.submit '保存', class: "report-post-btn-area-btn2", name: "status1", data: { confirm: "\n【注意!!!】 (最初にある赤枠で囲われた) 必須項目の\n\n「クリニックを選択」\n「治療当時のお住まい(都道府県&市区町村の両方)」 \n\nは選択されましたか？ \n必ずこの２つの項目を選択してから保存して下さい!" } %>
            </div>
          </div>
        <% else %>
          <div class="report-post-btn-area">
            <div class="report-post-btn-area-inner">
              <%= f.submit '更新', class: "report-post-btn-area-btn", data: { confirm: "\n【注意!!!】 (最初にある赤枠で囲われた) 必須項目の\n\n「クリニックを選択」\n「治療当時のお住まい(都道府県&市区町村の両方)」 \n\nは選択されましたか？ \n必ずこの２つの項目を選択してから更新して下さい!" } %>
              <% if false %>
              <% if @report.released? %>
                <%= link_to nonrelease_report_path(@report), method: :patch, data: { confirm: '非公開にして良いですか？'} do %>
                  <button class="report-post-btn-area-btn2">非公開</button>
                <% end %>
              <% else %>
                <%= link_to release_report_path(@report), method: :patch, data: { confirm: '公開して良いですか？'} do %>
                  <button class="report-post-btn-area-btn2">公開</button>
                <% end %>
              <% end %>
              <% end %>
            </div>
          </div>
        <% end %>

        <div class="float-right">
          <%= link_to '戻る', @report, class:"btn btn-primary" %>
          <%= link_to 'ホーム', reports_path, class:"btn btn-primary" %>
        </div>

      <% end %>
    </div>
  </div>
</div>